<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SPL Portfolio Progress Report â€“ Week 7</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.8.0/Recharts.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'DM Sans',sans-serif;background:#F0F2F5;color:#1B2A4A}
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:#E8ECF1}
::-webkit-scrollbar-thumb{background:#B0B8C4;border-radius:3px}
@keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
.anim{animation:fadeUp .5s ease both}
.anim-1{animation-delay:.05s}.anim-2{animation-delay:.1s}.anim-3{animation-delay:.15s}.anim-4{animation-delay:.2s}
.anim-5{animation-delay:.25s}.anim-6{animation-delay:.3s}
table{width:100%;border-collapse:separate;border-spacing:0;font-size:12px}
th{text-align:left;padding:10px 12px;border-bottom:2px solid #1B2A4A;color:#1B2A4A;font-weight:700;font-size:11px;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap}
td{padding:10px 12px}
tr:nth-child(even){background:#FAFBFD}
tr:hover td{background:#D6E3F822}
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const {useState,useMemo}=React;
const {PieChart,Pie,Cell,BarChart,Bar,XAxis,YAxis,Tooltip,ResponsiveContainer}=Recharts;

const C={navy:"#1B2A4A",darkBlue:"#1F4E79",medBlue:"#2F5496",accentBlue:"#4A90D9",lightBlue:"#D6E3F8",paleBlue:"#E8EEF4",green:"#2E7D32",greenBg:"#E8F5E9",amber:"#F9A825",amberBg:"#FFF8E1",red:"#C62828",redBg:"#FFEBEE",orange:"#EF6C00",orangeBg:"#FFF3E0",purple:"#6A1B9A",purpleBg:"#F3E5F5",teal:"#00695C",tealBg:"#E0F2F1",cardBg:"#FFFFFF",pageBg:"#F0F2F5",textPrimary:"#1B2A4A",textSecondary:"#5A6A7E",border:"#E0E5EC"};

const projects=[
{id:1,name:"Develop request medication platform",vertical:"DOM",sub:"Medical Mail",type:"Roadmap",stage:"Upcoming",lastStage:"Upcoming",status:"On Track",requester:"Gada AlHussain",completion:"Mar 2026",days:334},
{id:2,name:"ETOE: Offer service from Netherlands",vertical:"INT",sub:"Outbound",type:"Roadmap",stage:"Technical Discussions",lastStage:"Technical Discussions",status:"At Risk",requester:"Abdulmuhsin AlAjmi",completion:"Feb 28",days:334},
{id:3,name:"ETOE: Offer service from UK",vertical:"INT",sub:"Outbound",type:"Roadmap",stage:"Technical Discussions",lastStage:"Technical Discussions",status:"At Risk",requester:"Abdulmuhsin AlAjmi",completion:"Feb 28",days:334},
{id:4,name:"Reverse Logistics: Pickup Vs No Pickup",vertical:"DOM",sub:"Reverse Logistics",type:"Roadmap",stage:"Upcoming",lastStage:null,status:"On Track",requester:"Abrar A. AlZahrani",completion:"Feb 28",days:119},
{id:5,name:"Protection Plus",vertical:"INT",sub:"",type:"Roadmap",stage:"Technical Discussions",lastStage:"Requirements Writing",status:"At Risk",requester:"Talal Binammar",completion:"Feb 28",days:46,risk:"Delayed â€“ lack of SA resource"},
{id:6,name:"Updating Price Calculator",vertical:"INT",sub:"Outbound",type:"Roadmap",stage:"Technical Discussions",lastStage:"Technical Discussions",status:"On Track",requester:null,completion:"Feb 28",days:33},
{id:7,name:"eCommerce NDR | Enhancing Events Sequence",vertical:"DOM",sub:"eCommerce",type:"Roadmap",stage:"Requirements Writing",lastStage:"Requirements Writing",status:"On Track",requester:"Fahad AlHadyan",completion:null,days:28},
{id:8,name:"Delivery Plus",vertical:"DOM",sub:"",type:"Roadmap",stage:"Requirements Writing",lastStage:null,status:"On Track",requester:null,completion:"Feb 28",days:23},
{id:9,name:"Odd-sized Volumetric Weight charges on POS",vertical:"DOM",sub:"",type:"Roadmap",stage:"Upcoming",lastStage:null,status:"On Track",requester:"Mohammad Alloush",completion:"Mar 31",days:null},
{id:10,name:"Redirection Revamping customer journey",vertical:"DOM",sub:"",type:"Roadmap",stage:"Testing",lastStage:"Development",status:"Off Track",requester:null,completion:"Feb 28",days:null},
{id:11,name:"Post Business: Unified reviews management",vertical:"VAS",sub:"Post Business",type:"Roadmap",stage:"Development",lastStage:"Development",status:"Off Track",requester:"Mohammed AlSultan",completion:"Jan",days:null},
{id:12,name:"Product Catalog",vertical:"CP",sub:"",type:"Roadmap",stage:null,lastStage:null,status:null,requester:"Abdulaziz AlRasheed",completion:"Jan",days:null},
{id:13,name:"Unified Sales Lifecycle & Naqal Migration",vertical:"CP",sub:"",type:"Roadmap",stage:"Development",lastStage:null,status:null,requester:"Abdulaziz AlRasheed",completion:"Feb 28",days:null},
{id:14,name:"Introduce new products (CRM)",vertical:"CP",sub:"",type:"Roadmap",stage:"Technical Discussions",lastStage:null,status:"At Risk",requester:"Abdulaziz AlRasheed",completion:"Feb 28",days:null},
{id:15,name:"ASR: Unify communication under SPL branding",vertical:"INT",sub:"",type:"Roadmap",stage:"Cancelled",lastStage:null,status:null,requester:null,completion:"Feb 28",days:null},
{id:16,name:"NDR: Operational gap closure & RPC training",vertical:"INT",sub:"",type:"Roadmap",stage:"Cancelled",lastStage:null,status:null,requester:null,completion:"Mar 31",days:null},
{id:17,name:"Intl Inbound EBU: Automate CCPR issuance",vertical:"INT",sub:"Inbound",type:"Roadmap",stage:null,lastStage:null,status:null,requester:"Abdulaziz AlRasheed",completion:"Mar 31",days:null},
{id:18,name:"Intl Inbound EBU: Integrate Fasah data",vertical:"INT",sub:"Inbound",type:"Roadmap",stage:null,lastStage:null,status:null,requester:"Abdulaziz AlRasheed",completion:"Feb 28",days:null},
{id:19,name:"Intl Inbound EBU: Trigger DDU SMS",vertical:"INT",sub:"Inbound",type:"Roadmap",stage:null,lastStage:null,status:null,requester:"Abdulaziz AlRasheed",completion:"Feb 28",days:null},
{id:20,name:"ETOE: Offer Service from US",vertical:"INT",sub:"Outbound",type:"Roadmap",stage:"On-Hold",lastStage:null,status:null,requester:"Abdulmuhsin AlAjmi",completion:"Feb 28",days:null},
{id:21,name:"Improving tracking",vertical:"INT",sub:"Inbound â€“ Alami",type:"Roadmap",stage:"Technical Discussions",lastStage:"Requirements Writing",status:null,requester:null,completion:"Mar",days:null},
{id:22,name:"Migration to EBU system",vertical:"INT",sub:"Inbound â€“ Alami",type:"Roadmap",stage:"Requirements Writing",lastStage:null,status:null,requester:null,completion:"Mar",days:null},
{id:23,name:"Sea Freight Re-launch",vertical:"INT",sub:"Outbound â€“ Sea Freight",type:"Roadmap",stage:"Upcoming",lastStage:null,status:"On Track",requester:null,completion:"Mar",days:null},
{id:24,name:"Automate declaration value document in POS",vertical:"INT",sub:"Outbound",type:"Roadmap",stage:"Technical Discussions",lastStage:"Technical Discussions",status:"On Track",requester:null,completion:"Mar",days:null},
{id:25,name:"Re-price Intl Outbound Rate Structure",vertical:"INT",sub:"Outbound",type:"Roadmap",stage:"Launched",lastStage:null,status:null,requester:null,completion:"Feb 28",days:null},
{id:26,name:"Enabling SADAD Payments for SMEs",vertical:"DOM",sub:"SME",type:"Ad-hoc",stage:"On-Hold",lastStage:"Technical Discussions",status:"Off Track",requester:"Mohammad Alloush",completion:null,days:null},
{id:27,name:"New Weight Brackets & Pricing Update | Intl Outbound",vertical:"INT",sub:"",type:"Ad-hoc",stage:"Launched",lastStage:"Testing",status:"On Track",requester:null,completion:"Jan",days:18},
{id:28,name:"Display Name",vertical:"DOM",sub:"Reverse Logistics",type:"Ad-hoc",stage:"Testing",lastStage:"Testing",status:"Off Track",requester:null,completion:null,days:null,risk:"Pending from Naqel Side"},
{id:29,name:"Activate Pakistan sea freight service",vertical:"INT",sub:"Outbound â€“ Sea Freight",type:"BAU",stage:"Launched",lastStage:"Testing",status:"On Track",requester:"Yazan AlNowaisir",completion:"Jan",days:40},
{id:30,name:"Remove SMEs Descriptive Address",vertical:"DOM",sub:"SME",type:"BAU",stage:"Launched",lastStage:"Technical Discussions",status:"On Track",requester:"Mohammed AlSultan",completion:"Feb 28",days:10},
{id:31,name:"Adding/Displaying SPL Payslip on Credit Sales",vertical:"DOM",sub:"eCommerce",type:"BAU",stage:"Launched",lastStage:null,status:null,requester:null,completion:"Jan",days:5},
{id:32,name:"Activate chatbot and SMS for NGH",vertical:"DOM",sub:"Medical Mail",type:"BAU",stage:"Launched",lastStage:"Upcoming",status:"On Track",requester:"Gada AlHussain",completion:"Feb 12",days:2},
];

const stageColors={"Upcoming":"#90CAF9","Requirements Writing":"#CE93D8","Technical Discussions":"#FFB74D","Development":"#4FC3F7","Testing":"#AED581","Launched":"#66BB6A","On-Hold":"#BDBDBD","Cancelled":"#EF5350"};

const StatusBadge=({status})=>{
  if(!status) return <span style={{color:"#999",fontSize:11}}>â€”</span>;
  const cfg={"On Track":{bg:C.greenBg,color:C.green,icon:"âœ“"},"At Risk":{bg:C.amberBg,color:C.amber,icon:"âš "},"Off Track":{bg:C.redBg,color:C.red,icon:"âœ—"}}[status]||{bg:"#eee",color:"#666",icon:"?"};
  return <span style={{display:"inline-flex",alignItems:"center",gap:4,padding:"3px 10px",borderRadius:20,fontSize:11,fontWeight:600,background:cfg.bg,color:cfg.color,whiteSpace:"nowrap"}}>{cfg.icon} {status}</span>;
};

const StageBadge=({stage})=>{
  if(!stage) return <span style={{color:"#999",fontSize:11}}>â€”</span>;
  const color=stageColors[stage]||"#BDBDBD";
  return <span style={{display:"inline-block",padding:"3px 10px",borderRadius:20,fontSize:11,fontWeight:600,background:color+"33",color:color,border:`1px solid ${color}66`,whiteSpace:"nowrap"}}>{stage}</span>;
};

const KPICard=({icon,value,label,color,bgColor,cls})=>(
  <div className={cls} style={{background:C.cardBg,borderRadius:12,padding:"20px 24px",flex:1,minWidth:150,boxShadow:"0 1px 3px rgba(0,0,0,0.06)",border:`1px solid ${C.border}`,position:"relative",overflow:"hidden"}}>
    <div style={{position:"absolute",top:0,left:0,right:0,height:3,background:color}}/>
    <div style={{display:"flex",alignItems:"center",gap:14}}>
      <div style={{width:44,height:44,borderRadius:10,background:bgColor,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20}}>{icon}</div>
      <div>
        <div style={{fontSize:28,fontWeight:700,color:C.textPrimary,lineHeight:1.1,fontFamily:"'Playfair Display',Georgia,serif"}}>{value}</div>
        <div style={{fontSize:12,color:C.textSecondary,fontWeight:500,marginTop:2}}>{label}</div>
      </div>
    </div>
  </div>
);

const CustomTooltip=({active,payload,label})=>{
  if(!active||!payload?.length) return null;
  return <div style={{background:C.navy,color:"#fff",padding:"10px 14px",borderRadius:8,fontSize:12,boxShadow:"0 4px 12px rgba(0,0,0,0.2)"}}>
    <div style={{fontWeight:600,marginBottom:4}}>{label}</div>
    {payload.map((p,i)=><div key={i} style={{display:"flex",gap:8,alignItems:"center"}}>
      <span style={{width:8,height:8,borderRadius:2,background:p.color,display:"inline-block"}}/><span>{p.name}: {p.value}</span>
    </div>)}
  </div>;
};

function App(){
  const [activeFilter,setActiveFilter]=useState("all");
  const [selectedVertical,setSelectedVertical]=useState("all");

  const filtered=useMemo(()=>{
    let d=projects;
    if(activeFilter!=="all") d=d.filter(p=>{
      if(activeFilter==="active") return p.stage&&!["Launched","Cancelled","On-Hold"].includes(p.stage);
      if(activeFilter==="launched") return p.stage==="Launched";
      if(activeFilter==="onhold") return p.stage==="On-Hold"||p.stage==="Cancelled";
      return true;
    });
    if(selectedVertical!=="all") d=d.filter(p=>p.vertical===selectedVertical);
    return d;
  },[activeFilter,selectedVertical]);

  const statusData=[
    {name:"On Track",value:projects.filter(p=>p.status==="On Track").length,color:C.green},
    {name:"At Risk",value:projects.filter(p=>p.status==="At Risk").length,color:C.amber},
    {name:"Off Track",value:projects.filter(p=>p.status==="Off Track").length,color:C.red},
  ];

  const verticalData=[
    {name:"International",value:projects.filter(p=>p.vertical==="INT").length,color:C.orange},
    {name:"Domestic",value:projects.filter(p=>p.vertical==="DOM").length,color:C.purple},
    {name:"VAS",value:projects.filter(p=>p.vertical==="VAS").length,color:C.teal},
    {name:"CP",value:projects.filter(p=>p.vertical==="CP").length,color:C.accentBlue},
  ];

  const stageOrder=["Upcoming","Requirements Writing","Technical Discussions","Development","Testing","Launched","On-Hold","Cancelled"];
  const stageCounts=stageOrder.map(s=>({name:s.length>12?s.slice(0,12)+"â€¦":s,fullName:s,count:projects.filter(p=>p.stage===s).length,color:stageColors[s]})).filter(s=>s.count>0);

  const typeData=[{name:"Roadmap",count:projects.filter(p=>p.type==="Roadmap").length},{name:"Ad-hoc",count:projects.filter(p=>p.type==="Ad-hoc").length},{name:"BAU",count:projects.filter(p=>p.type==="BAU").length}];

  const filters=[{key:"all",label:"All CRs"},{key:"active",label:"Active"},{key:"launched",label:"Launched"},{key:"onhold",label:"On-Hold / Cancelled"}];
  const verticals=["all","INT","DOM","VAS","CP"];

  return <div style={{fontFamily:"'DM Sans',sans-serif",background:C.pageBg,minHeight:"100vh",color:C.textPrimary}}>

    {/* Header */}
    <div style={{background:`linear-gradient(135deg,${C.navy} 0%,${C.darkBlue} 50%,${C.medBlue} 100%)`,padding:"24px 32px",color:"#fff"}}>
      <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:12,maxWidth:1400,margin:"0 auto"}}>
        <div>
          <div style={{fontSize:11,letterSpacing:2,textTransform:"uppercase",opacity:.7,fontWeight:600}}>SPL Portfolio</div>
          <h1 style={{margin:"4px 0 0",fontSize:22,fontWeight:700,letterSpacing:-.3,fontFamily:"'Playfair Display',Georgia,serif"}}>Progress Report Dashboard</h1>
        </div>
        <div style={{textAlign:"right"}}>
          <div style={{fontSize:13,fontWeight:600,opacity:.9}}>Week 7 | Feb 15 â€“ 19, 2026</div>
          <div style={{fontSize:11,opacity:.6,marginTop:2}}>Prepared for SPL Management</div>
        </div>
      </div>
    </div>

    <div style={{padding:"24px 32px",maxWidth:1400,margin:"0 auto"}}>

      {/* KPI Row */}
      <div style={{display:"flex",gap:16,marginBottom:24,flexWrap:"wrap"}}>
        <KPICard cls="anim anim-1" icon="ðŸ“" value={32} label="Total Q1 CRs" color={C.medBlue} bgColor={C.lightBlue}/>
        <KPICard cls="anim anim-2" icon="âš¡" value={14} label="Active CRs" color={C.accentBlue} bgColor="#E3F2FD"/>
        <KPICard cls="anim anim-3" icon="ðŸ“ˆ" value={4} label="Upcoming" color={C.green} bgColor={C.greenBg}/>
        <KPICard cls="anim anim-4" icon="ðŸš€" value={6} label="Launched" color="#00897B" bgColor={C.tealBg}/>
      </div>

      {/* Delivery Indicators Row */}
      <div className="anim anim-5" style={{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:16,marginBottom:24}}>
        {/* DPI */}
        <div style={{background:C.cardBg,borderRadius:12,padding:20,boxShadow:"0 1px 3px rgba(0,0,0,0.06)",border:`1px solid ${C.border}`,display:"flex",flexDirection:"column",alignItems:"center"}}>
          <div style={{fontSize:12,fontWeight:600,color:C.textSecondary,marginBottom:12}}>Delivery Performance Index</div>
          <div style={{position:"relative",width:120,height:80}}>
            <svg viewBox="0 0 120 70" width="120" height="70">
              <path d="M10 65 A50 50 0 0 1 110 65" fill="none" stroke="#E0E5EC" strokeWidth="10" strokeLinecap="round"/>
              <path d="M10 65 A50 50 0 0 1 110 65" fill="none" stroke={C.red} strokeWidth="10" strokeLinecap="round" strokeDasharray="105 157"/>
            </svg>
            <div style={{position:"absolute",bottom:0,left:"50%",transform:"translateX(-50%)",fontSize:22,fontWeight:700,color:C.red,fontFamily:"'Playfair Display',Georgia,serif"}}>67%</div>
          </div>
          <div style={{marginTop:8,fontSize:11,color:C.red,fontWeight:600,background:C.redBg,padding:"2px 10px",borderRadius:12}}>Below Target</div>
        </div>

        {/* Planned vs Actual */}
        <div style={{background:C.cardBg,borderRadius:12,padding:20,boxShadow:"0 1px 3px rgba(0,0,0,0.06)",border:`1px solid ${C.border}`}}>
          <div style={{fontSize:12,fontWeight:600,color:C.textSecondary,marginBottom:16}}>Progress (End of Feb)</div>
          {[{label:"Planned",value:23,color:C.medBlue},{label:"Actual",value:15,color:C.red}].map(item=>
            <div key={item.label} style={{marginBottom:12}}>
              <div style={{display:"flex",justifyContent:"space-between",fontSize:12,marginBottom:4}}>
                <span style={{fontWeight:500}}>{item.label}</span>
                <span style={{fontWeight:700,color:item.color}}>{item.value}%</span>
              </div>
              <div style={{background:"#E8ECF1",borderRadius:6,height:8,overflow:"hidden"}}>
                <div style={{width:`${item.value}%`,height:"100%",borderRadius:6,background:item.color,transition:"width 1s ease"}}/>
              </div>
            </div>
          )}
        </div>

        {/* Status Donut */}
        <div style={{background:C.cardBg,borderRadius:12,padding:20,boxShadow:"0 1px 3px rgba(0,0,0,0.06)",border:`1px solid ${C.border}`,display:"flex",flexDirection:"column",alignItems:"center"}}>
          <div style={{fontSize:12,fontWeight:600,color:C.textSecondary,marginBottom:8}}>Status Distribution</div>
          <ResponsiveContainer width={140} height={100}>
            <PieChart><Pie data={statusData} cx="50%" cy="50%" innerRadius={28} outerRadius={45} dataKey="value" stroke="none">
              {statusData.map((e,i)=><Cell key={i} fill={e.color}/>)}
            </Pie></PieChart>
          </ResponsiveContainer>
          <div style={{display:"flex",gap:12,flexWrap:"wrap",justifyContent:"center"}}>
            {statusData.map(s=><div key={s.name} style={{display:"flex",alignItems:"center",gap:4,fontSize:11}}>
              <span style={{width:8,height:8,borderRadius:"50%",background:s.color,display:"inline-block"}}/>
              <span style={{fontWeight:500}}>{s.value}</span> <span style={{color:C.textSecondary}}>{s.name}</span>
            </div>)}
          </div>
        </div>

        {/* Vertical Split */}
        <div style={{background:C.cardBg,borderRadius:12,padding:20,boxShadow:"0 1px 3px rgba(0,0,0,0.06)",border:`1px solid ${C.border}`}}>
          <div style={{fontSize:12,fontWeight:600,color:C.textSecondary,marginBottom:12}}>By Vertical</div>
          {verticalData.map(v=><div key={v.name} style={{display:"flex",alignItems:"center",gap:10,marginBottom:10}}>
            <div style={{width:32,height:32,borderRadius:8,background:v.color+"18",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:700,color:v.color}}>{v.value}</div>
            <div style={{flex:1}}>
              <div style={{fontSize:12,fontWeight:600}}>{v.name}</div>
              <div style={{background:"#E8ECF1",borderRadius:4,height:4,marginTop:3}}>
                <div style={{width:`${(v.value/32)*100}%`,height:"100%",borderRadius:4,background:v.color}}/>
              </div>
            </div>
          </div>)}
        </div>
      </div>

      {/* Charts Row */}
      <div className="anim anim-6" style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:24}}>
        <div style={{background:C.cardBg,borderRadius:12,padding:24,boxShadow:"0 1px 3px rgba(0,0,0,0.06)",border:`1px solid ${C.border}`}}>
          <div style={{fontSize:14,fontWeight:700,color:C.textPrimary,marginBottom:16}}>Stage Pipeline</div>
          <ResponsiveContainer width="100%" height={200}>
            <BarChart data={stageCounts} margin={{top:5,right:10,left:-20,bottom:0}}>
              <XAxis dataKey="name" tick={{fontSize:10,fill:C.textSecondary}} axisLine={false} tickLine={false}/>
              <YAxis tick={{fontSize:10,fill:C.textSecondary}} axisLine={false} tickLine={false} allowDecimals={false}/>
              <Tooltip content={<CustomTooltip/>}/>
              <Bar dataKey="count" radius={[6,6,0,0]} name="CRs">
                {stageCounts.map((e,i)=><Cell key={i} fill={e.color}/>)}
              </Bar>
            </BarChart>
          </ResponsiveContainer>
        </div>
        <div style={{background:C.cardBg,borderRadius:12,padding:24,boxShadow:"0 1px 3px rgba(0,0,0,0.06)",border:`1px solid ${C.border}`}}>
          <div style={{fontSize:14,fontWeight:700,color:C.textPrimary,marginBottom:16}}>CR Type Breakdown</div>
          <ResponsiveContainer width="100%" height={200}>
            <PieChart><Pie data={typeData} cx="50%" cy="50%" outerRadius={75} dataKey="count" label={({name,count})=>`${name} (${count})`} labelLine={false} stroke="none">
              <Cell fill={C.medBlue}/><Cell fill={C.orange}/><Cell fill={C.teal}/>
            </Pie><Tooltip content={<CustomTooltip/>}/></PieChart>
          </ResponsiveContainer>
        </div>
      </div>

      {/* Filters & Table */}
      <div style={{background:C.cardBg,borderRadius:12,padding:24,boxShadow:"0 1px 3px rgba(0,0,0,0.06)",border:`1px solid ${C.border}`}}>
        <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:12,marginBottom:16}}>
          <div style={{fontSize:14,fontWeight:700}}>CR Detail View</div>
          <div style={{display:"flex",gap:8,flexWrap:"wrap"}}>
            {filters.map(f=><button key={f.key} onClick={()=>setActiveFilter(f.key)} style={{padding:"6px 14px",borderRadius:20,border:"none",cursor:"pointer",fontSize:12,fontWeight:600,transition:"all .2s",background:activeFilter===f.key?C.navy:"#EEF1F6",color:activeFilter===f.key?"#fff":C.textSecondary}}>{f.label}</button>)}
            <select value={selectedVertical} onChange={e=>setSelectedVertical(e.target.value)} style={{padding:"6px 12px",borderRadius:20,border:`1px solid ${C.border}`,fontSize:12,fontWeight:600,background:"#fff",color:C.textPrimary,cursor:"pointer"}}>
              {verticals.map(v=><option key={v} value={v}>{v==="all"?"All Verticals":v}</option>)}
            </select>
          </div>
        </div>
        <div style={{overflowX:"auto"}}>
          <table>
            <thead><tr>
              {["#","CR Name","Vertical","Type","Current Stage","Last Week","Status","Requester","Completion"].map(h=><th key={h}>{h}</th>)}
            </tr></thead>
            <tbody>
              {filtered.map(p=><tr key={p.id}>
                <td style={{fontWeight:600,color:C.textSecondary}}>{p.id}</td>
                <td style={{fontWeight:600,maxWidth:260}}>{p.name}{p.risk&&<div style={{fontSize:10,color:C.red,marginTop:2,fontWeight:400}}>{p.risk}</div>}</td>
                <td style={{whiteSpace:"nowrap"}}><span style={{padding:"2px 8px",borderRadius:4,fontSize:11,fontWeight:600,background:p.vertical==="INT"?C.orangeBg:p.vertical==="DOM"?C.purpleBg:p.vertical==="VAS"?C.tealBg:C.lightBlue,color:p.vertical==="INT"?C.orange:p.vertical==="DOM"?C.purple:p.vertical==="VAS"?C.teal:C.accentBlue}}>{p.vertical}{p.sub?` â€“ ${p.sub}`:""}</span></td>
                <td style={{fontSize:11,color:C.textSecondary}}>{p.type}</td>
                <td><StageBadge stage={p.stage}/></td>
                <td><StageBadge stage={p.lastStage}/></td>
                <td><StatusBadge status={p.status}/></td>
                <td style={{fontSize:11,color:C.textSecondary}}>{p.requester||"â€”"}</td>
                <td style={{fontSize:11,fontWeight:500,whiteSpace:"nowrap"}}>{p.completion||"â€”"}</td>
              </tr>)}
            </tbody>
          </table>
          {filtered.length===0&&<div style={{padding:40,textAlign:"center",color:C.textSecondary,fontSize:13}}>No CRs match the selected filters.</div>}
        </div>
        <div style={{marginTop:12,fontSize:11,color:C.textSecondary,textAlign:"right"}}>Showing {filtered.length} of {projects.length} CRs</div>
      </div>

      <div style={{marginTop:24,padding:"16px 0",borderTop:`1px solid ${C.border}`,display:"flex",justifyContent:"space-between",fontSize:11,color:C.textSecondary}}>
        <span>Report Date: February 15, 2026</span>
        <span>SPL Portfolio Management</span>
      </div>
    </div>
  </div>;
}

ReactDOM.render(<App/>,document.getElementById("root"));
</script>
</body>
</html>
